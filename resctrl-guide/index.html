
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://unvariance.github.io/collector/resctrl-guide/">
      
      
        <link rel="prev" href="../pipeline-implementation/">
      
      
        <link rel="next" href="../s3-testing/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Linux Resource Control (resctrl) Operations Guide - Unvariance collector docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#linux-resource-control-resctrl-operations-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Unvariance collector docs" class="md-header__button md-logo" aria-label="Unvariance collector docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Unvariance collector docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Linux Resource Control (resctrl) Operations Guide
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Unvariance collector docs" class="md-nav__button md-logo" aria-label="Unvariance collector docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Unvariance collector docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../benchmark/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Memory Collector Benchmark Results
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../collection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Memory Collector Telemetry Strategy
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RMID Tracking Design
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../devlog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Devlog
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../noise-generators/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Synthetic Noise Generators
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../pipeline-implementation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pipeline Implementation Guide
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Linux Resource Control (resctrl) Operations Guide
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Linux Resource Control (resctrl) Operations Guide
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#important-note-resctrl-vs-cgroup" class="md-nav__link">
    <span class="md-ellipsis">
      Important Note: resctrl vs cgroup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      Table of Contents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hardware-requirements-and-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Hardware Requirements and Setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Hardware Requirements and Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#verify-hardware-support" class="md-nav__link">
    <span class="md-ellipsis">
      Verify Hardware Support
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mount-resctrl-filesystem" class="md-nav__link">
    <span class="md-ellipsis">
      Mount resctrl Filesystem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-available-capabilities" class="md-nav__link">
    <span class="md-ellipsis">
      Check Available Capabilities
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#our-tested-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Our Tested Implementation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Our Tested Implementation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#workload-design" class="md-nav__link">
    <span class="md-ellipsis">
      Workload Design
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-group-creation" class="md-nav__link">
    <span class="md-ellipsis">
      Resource Group Creation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stress-testing-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Stress Testing Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resource-control-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      Resource Control Workflow
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Resource Control Workflow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#phase-1-baseline-cache-performance" class="md-nav__link">
    <span class="md-ellipsis">
      Phase 1: Baseline Cache Performance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-2-both-workloads-unthrottled" class="md-nav__link">
    <span class="md-ellipsis">
      Phase 2: Both Workloads Unthrottled
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-3-memory-bandwidth-throttling" class="md-nav__link">
    <span class="md-ellipsis">
      Phase 3: Memory Bandwidth Throttling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-4-combined-memory-and-cache-restrictions" class="md-nav__link">
    <span class="md-ellipsis">
      Phase 4: Combined Memory and Cache Restrictions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-5-resource-restoration" class="md-nav__link">
    <span class="md-ellipsis">
      Phase 5: Resource Restoration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#careful-schemata-modification" class="md-nav__link">
    <span class="md-ellipsis">
      Careful Schemata Modification
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#measurement-and-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      Measurement and Monitoring
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Measurement and Monitoring">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-metrics-we-collect" class="md-nav__link">
    <span class="md-ellipsis">
      Key Metrics We Collect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitoring-file-locations" class="md-nav__link">
    <span class="md-ellipsis">
      Monitoring File Locations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#untested-capabilities" class="md-nav__link">
    <span class="md-ellipsis">
      Untested Capabilities
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Untested Capabilities">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mount-options-considered-but-not-tested" class="md-nav__link">
    <span class="md-ellipsis">
      Mount Options (Considered but Not Tested)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-monitoring-available-but-not-implemented" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Monitoring (Available but Not Implemented)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative-stress-testing-approaches-considered" class="md-nav__link">
    <span class="md-ellipsis">
      Alternative Stress Testing Approaches (Considered)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#programming-interface-available-but-not-used" class="md-nav__link">
    <span class="md-ellipsis">
      Programming Interface (Available but Not Used)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      References
    </span>
  </a>
  
    <nav class="md-nav" aria-label="References">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#workflow-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Workflow Implementation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#related-projects-and-documentation" class="md-nav__link">
    <span class="md-ellipsis">
      Related Projects and Documentation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../s3-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    S3 Testing for Memory Collector
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Architecture
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_1" >
        
          
          <label class="md-nav__link" for="__nav_10_1" id="__nav_10_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Decisions
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_1">
            <span class="md-nav__icon md-icon"></span>
            Decisions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../architecture/decisions/2024-12-21-container-notifications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2024-12-21: Notifications for container lifecycle events
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../architecture/decisions/2025-01-02-aws-test-runners/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2025-01-02: AWS test runners
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../architecture/decisions/2025-02-18-getting-cmt-measurements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2025-02-18: Collecting Intel CMT Measurements
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Ci
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            Ci
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ci/aws-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AWS Setup for CI Testing
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#important-note-resctrl-vs-cgroup" class="md-nav__link">
    <span class="md-ellipsis">
      Important Note: resctrl vs cgroup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      Table of Contents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hardware-requirements-and-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Hardware Requirements and Setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Hardware Requirements and Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#verify-hardware-support" class="md-nav__link">
    <span class="md-ellipsis">
      Verify Hardware Support
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mount-resctrl-filesystem" class="md-nav__link">
    <span class="md-ellipsis">
      Mount resctrl Filesystem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-available-capabilities" class="md-nav__link">
    <span class="md-ellipsis">
      Check Available Capabilities
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#our-tested-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Our Tested Implementation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Our Tested Implementation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#workload-design" class="md-nav__link">
    <span class="md-ellipsis">
      Workload Design
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-group-creation" class="md-nav__link">
    <span class="md-ellipsis">
      Resource Group Creation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stress-testing-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Stress Testing Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resource-control-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      Resource Control Workflow
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Resource Control Workflow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#phase-1-baseline-cache-performance" class="md-nav__link">
    <span class="md-ellipsis">
      Phase 1: Baseline Cache Performance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-2-both-workloads-unthrottled" class="md-nav__link">
    <span class="md-ellipsis">
      Phase 2: Both Workloads Unthrottled
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-3-memory-bandwidth-throttling" class="md-nav__link">
    <span class="md-ellipsis">
      Phase 3: Memory Bandwidth Throttling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-4-combined-memory-and-cache-restrictions" class="md-nav__link">
    <span class="md-ellipsis">
      Phase 4: Combined Memory and Cache Restrictions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-5-resource-restoration" class="md-nav__link">
    <span class="md-ellipsis">
      Phase 5: Resource Restoration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#careful-schemata-modification" class="md-nav__link">
    <span class="md-ellipsis">
      Careful Schemata Modification
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#measurement-and-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      Measurement and Monitoring
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Measurement and Monitoring">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-metrics-we-collect" class="md-nav__link">
    <span class="md-ellipsis">
      Key Metrics We Collect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitoring-file-locations" class="md-nav__link">
    <span class="md-ellipsis">
      Monitoring File Locations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#untested-capabilities" class="md-nav__link">
    <span class="md-ellipsis">
      Untested Capabilities
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Untested Capabilities">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mount-options-considered-but-not-tested" class="md-nav__link">
    <span class="md-ellipsis">
      Mount Options (Considered but Not Tested)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-monitoring-available-but-not-implemented" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Monitoring (Available but Not Implemented)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative-stress-testing-approaches-considered" class="md-nav__link">
    <span class="md-ellipsis">
      Alternative Stress Testing Approaches (Considered)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#programming-interface-available-but-not-used" class="md-nav__link">
    <span class="md-ellipsis">
      Programming Interface (Available but Not Used)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      References
    </span>
  </a>
  
    <nav class="md-nav" aria-label="References">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#workflow-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Workflow Implementation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#related-projects-and-documentation" class="md-nav__link">
    <span class="md-ellipsis">
      Related Projects and Documentation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="linux-resource-control-resctrl-operations-guide">Linux Resource Control (resctrl) Operations Guide</h1>
<p>This guide documents our <strong>tested implementation</strong> of Linux Resource Control (resctrl) for Intel RDT (Resource Director Technology) monitoring and allocation. The examples are based on our validated GitHub Actions workflow that demonstrates practical resource control with real workloads.</p>
<h2 id="important-note-resctrl-vs-cgroup">Important Note: resctrl vs cgroup</h2>
<p>This guide focuses on <strong>Intel RDT/resctrl</strong> (<code>/sys/fs/resctrl</code>), which provides hardware-level resource control using Intel RDT features like Cache Allocation Technology (CAT), Memory Bandwidth Allocation (MBA), and Cache Monitoring Technology (CMT). This is different from <strong>cgroup resource control</strong> (<code>/sys/fs/cgroup</code>), which provides software-level scheduling controls.</p>
<p>For comprehensive cgroup v2 resource control, see the <a href="https://github.com/facebookexperimental/resctl-demo">Facebook resctl-demo project</a>, which demonstrates cgroup-based resource protection and memory management.</p>
<h2 id="table-of-contents">Table of Contents</h2>
<ol>
<li><a href="#hardware-requirements-and-setup">Hardware Requirements and Setup</a></li>
<li><a href="#our-tested-implementation">Our Tested Implementation</a></li>
<li><a href="#resource-control-workflow">Resource Control Workflow</a></li>
<li><a href="#measurement-and-monitoring">Measurement and Monitoring</a></li>
<li><a href="#untested-capabilities">Untested Capabilities</a></li>
<li><a href="#references">References</a></li>
</ol>
<h2 id="hardware-requirements-and-setup">Hardware Requirements and Setup</h2>
<h3 id="verify-hardware-support">Verify Hardware Support</h3>
<pre><code class="language-bash"># Check CPU features for RDT support
grep -E &quot;rdt_a|cat_l3|cqm_llc|cqm_occup_llc|cqm_mbm_total|cqm_mbm_local|mba&quot; /proc/cpuinfo

# Check kernel support
cat /proc/filesystems | grep resctrl
</code></pre>
<h3 id="mount-resctrl-filesystem">Mount resctrl Filesystem</h3>
<pre><code class="language-bash"># Mount resctrl filesystem (basic mount we use)
sudo mkdir -p /sys/fs/resctrl
sudo mount -t resctrl resctrl /sys/fs/resctrl

# Verify mount
mount | grep resctrl
</code></pre>
<h3 id="check-available-capabilities">Check Available Capabilities</h3>
<pre><code class="language-bash"># Hardware capabilities we actually use
echo &quot;CLOSIDs: $(cat /sys/fs/resctrl/info/L3/num_closids)&quot;
echo &quot;RMIDs: $(cat /sys/fs/resctrl/info/L3_MON/num_rmids)&quot;
echo &quot;Cache mask: $(cat /sys/fs/resctrl/info/L3/cbm_mask)&quot;
echo &quot;Min bandwidth: $(cat /sys/fs/resctrl/info/MB/min_bandwidth)%&quot;
</code></pre>
<h2 id="our-tested-implementation">Our Tested Implementation</h2>
<h3 id="workload-design">Workload Design</h3>
<p>Our implementation demonstrates resource control using two distinct workload types:</p>
<ol>
<li><strong>Memory Bandwidth Intensive</strong>: Uses <code>stress-ng --vm X --vm-bytes 75%</code> to create high memory bandwidth demand</li>
<li><strong>Cache Sensitive</strong>: Uses <code>stress-ng --cache X --cache-size XM --perf --metrics-brief</code> to create measurable cache performance patterns</li>
</ol>
<h3 id="resource-group-creation">Resource Group Creation</h3>
<pre><code class="language-bash"># Create two resource control groups (our tested approach)
sudo mkdir -p /sys/fs/resctrl/memory_bandwidth_group
sudo mkdir -p /sys/fs/resctrl/cache_sensitive_group

# CPU assignment strategy: quarters of total CPUs for isolation
# Memory bandwidth group gets first quarter (CPUs 0 to N/4-1)
# Cache sensitive group gets second quarter (CPUs N/4 to N/2-1)
# Remaining CPUs left unassigned for isolation
</code></pre>
<h3 id="stress-testing-configuration">Stress Testing Configuration</h3>
<p><strong>Memory Bandwidth Workload:</strong>
- Command: <code>stress-ng --vm [threads] --vm-bytes 75%</code>
- Thread count: Half of assigned CPU quarter (1/8 of total system CPUs)
- Duration: Long-running (30 minutes) to maintain consistent memory pressure</p>
<p><strong>Cache Sensitive Workload:</strong>
- Command: <code>stress-ng --cache [threads] --cache-size [size]M --perf --metrics-brief</code>
- Thread count: 1/8 of assigned CPU quarter
- Cache size: 1MB per assigned CPU, distributed across threads
- Duration: 17 seconds with 10s warmup + 5s measurement + 2s buffer</p>
<h2 id="resource-control-workflow">Resource Control Workflow</h2>
<p>Our tested workflow demonstrates five phases of resource control:</p>
<h3 id="phase-1-baseline-cache-performance">Phase 1: Baseline Cache Performance</h3>
<ul>
<li><strong>Objective</strong>: Measure cache workload performance without memory bandwidth contention</li>
<li><strong>Configuration</strong>: Cache workload only, no memory bandwidth stress</li>
<li><strong>Measurements</strong>: Cache references, misses, hit rates, LLC occupancy</li>
</ul>
<h3 id="phase-2-both-workloads-unthrottled">Phase 2: Both Workloads Unthrottled</h3>
<ul>
<li><strong>Objective</strong>: Demonstrate resource contention without controls</li>
<li><strong>Configuration</strong>: Both workloads running with full resource access</li>
<li><strong>Expected Result</strong>: Cache performance degradation due to memory bandwidth interference</li>
</ul>
<h3 id="phase-3-memory-bandwidth-throttling">Phase 3: Memory Bandwidth Throttling</h3>
<ul>
<li><strong>Objective</strong>: Demonstrate Memory Bandwidth Allocation (MBA)</li>
<li><strong>Configuration</strong>: Memory bandwidth limited to 20% via schemata</li>
<li><strong>Implementation</strong>: Careful modification preserving existing L3 settings</li>
</ul>
<h3 id="phase-4-combined-memory-and-cache-restrictions">Phase 4: Combined Memory and Cache Restrictions</h3>
<ul>
<li><strong>Objective</strong>: Demonstrate Cache Allocation Technology (CAT) with MBA</li>
<li><strong>Configuration</strong>: Memory at 20% + cache restricted to first 4 ways</li>
<li><strong>Implementation</strong>: Careful modification preserving existing MB settings</li>
</ul>
<h3 id="phase-5-resource-restoration">Phase 5: Resource Restoration</h3>
<ul>
<li><strong>Objective</strong>: Verify performance recovery when restrictions are removed</li>
<li><strong>Configuration</strong>: Restore full resources to both groups</li>
<li><strong>Expected Result</strong>: Cache performance returns to near-baseline levels</li>
</ul>
<h3 id="careful-schemata-modification">Careful Schemata Modification</h3>
<p>Our implementation takes a conservative approach when modifying resource allocations: we read the existing schemata, modify only the specific resource line we need to change, and write it back. This preserves existing settings and prevents accidentally overwriting other resource allocations during phase transitions, however we did not check if this was strictly necessary.</p>
<h2 id="measurement-and-monitoring">Measurement and Monitoring</h2>
<h3 id="key-metrics-we-collect">Key Metrics We Collect</h3>
<p><strong>Memory Bandwidth Monitoring:</strong>
- <code>mbm_total_bytes</code>: Total memory bandwidth (cumulative)
- <code>mbm_local_bytes</code>: Local memory bandwidth (cumulative)
- Calculated rates: <code>(final_value - initial_value) / measurement_duration</code></p>
<p><strong>Cache Performance Monitoring:</strong>
- <code>llc_occupancy</code>: Last Level Cache occupancy in bytes
- Cache references (total LLC accesses) and misses from <code>stress-ng --perf</code>
- Cache hit rate: <code>(references - misses) / references * 100</code>
- Throughput: <code>stress-ng</code> bogo operations per second</p>
<p><strong>Note on Cache Counters</strong>: Per Intel SDM, LLC references and misses may include speculation and L1 hardware prefetcher activity, but may exclude other hardware prefetchers. Value comparison for performance estimation across different systems is not recommended due to implementation-specific characteristics.</p>
<p><strong>Data Collection Format:</strong></p>
<pre><code class="language-csv">phase,workload_type,llc_occupancy,memory_bandwidth_total,memory_bandwidth_local,cache_references_gbps,cache_misses_gbps,cache_hit_rate,bogo_ops
</code></pre>
<h3 id="monitoring-file-locations">Monitoring File Locations</h3>
<pre><code class="language-bash"># LLC occupancy for each group
/sys/fs/resctrl/[group_name]/mon_data/mon_L3_00/llc_occupancy

# Memory bandwidth counters
/sys/fs/resctrl/[group_name]/mon_data/mon_L3_00/mbm_total_bytes
/sys/fs/resctrl/[group_name]/mon_data/mon_L3_00/mbm_local_bytes

# Resource allocation settings
/sys/fs/resctrl/[group_name]/schemata
</code></pre>
<h2 id="untested-capabilities">Untested Capabilities</h2>
<p>resctrl supports additional features we haven't tested:</p>
<h3 id="mount-options-considered-but-not-tested">Mount Options (Considered but Not Tested)</h3>
<ul>
<li><code>cdp,cdpl2</code>: Code/Data Prioritization for L3 and L2 caches</li>
<li><code>mba_MBps</code>: Memory bandwidth allocation in MBps instead of percentage</li>
</ul>
<h3 id="advanced-monitoring-available-but-not-implemented">Advanced Monitoring (Available but Not Implemented)</h3>
<ul>
<li><strong>Monitoring subgroups</strong>: <code>mon_groups/</code> for finer-grained RMID allocation</li>
<li><strong>Multi-domain systems</strong>: Our implementation assumes single domain (domain 0)</li>
<li><strong>L2 cache monitoring</strong>: Focus was on L3 cache allocation and monitoring</li>
</ul>
<h3 id="alternative-stress-testing-approaches-considered">Alternative Stress Testing Approaches (Considered)</h3>
<p>Other <code>stress-ng</code> options like <code>--matrix</code>, <code>--stream</code>, and <code>--cpu</code> methods could provide different stress patterns but weren't necessary for our demonstration.</p>
<h3 id="programming-interface-available-but-not-used">Programming Interface (Available but Not Used)</h3>
<p>Tools like <a href="https://github.com/intel/intel-cmt-cat">intel-cmt-cat</a> provide C/C++ APIs for resctrl operations. Our shell-based approach was sufficient for demonstration purposes.</p>
<h2 id="references">References</h2>
<h3 id="workflow-implementation">Workflow Implementation</h3>
<ul>
<li><strong>GitHub Actions Workflow</strong>: <code>.github/workflows/resctrl-demo.yaml</code> - Complete tested implementation</li>
</ul>
<h3 id="related-projects-and-documentation">Related Projects and Documentation</h3>
<ul>
<li><strong>Linux Kernel Documentation</strong>: <a href="https://www.kernel.org/doc/Documentation/x86/resctrl.rst">resctrl.rst</a></li>
<li><strong>Facebook resctl-demo</strong>: <a href="https://github.com/facebookexperimental/resctl-demo">GitHub Repository</a> - Comprehensive cgroup-based resource control (different from resctrl)</li>
<li><strong>Intel RDT Tools</strong>: <a href="https://github.com/intel/intel-cmt-cat">intel-cmt-cat</a> - Intel's official RDT user-space tools</li>
<li><strong>stress-ng Documentation</strong>: <a href="https://wiki.ubuntu.com/Kernel/Reference/stress-ng">Ubuntu stress-ng Reference</a></li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    
  </body>
</html>